<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小玫瑰山庄</title>
    <link rel="stylesheet" href="style.css">
    <!-- 引入Three.js库，用于后续创建3D场景 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <!-- ===== 登录界面 ===== -->
    <div id="loginScreen" class="screen">
        <div class="login-container">
            <h1>🕯️ 小玫瑰山庄 🕯️</h1>
            <p class="subtitle">尊敬的客人，欢迎来到玫瑰山庄。</p>
            
            <!-- 玩家登录区域 -->
            <div class="login-section">
                <h3>👤 玩家登录</h3>
                <div class="input-group">
                    <label for="playerName">创建你的角色：</label>
                    <input type="text" id="playerName" placeholder="输入你的角色名..." maxlength="20">
                </div>
                <button id="loginBtn" class="btn-primary">开始游戏 / 载入角色</button>
            </div>
            
            <!-- 分隔线 -->
            <div class="separator">
                <span>或</span>
            </div>
            
            <!-- 管理员登录区域 -->
            <div class="login-section">
                <h3>🔧 管理员登录</h3>
                <div class="input-group">
                    <label for="adminPassword">管理员密钥：</label>
                    <input type="password" id="adminPasswordInput" placeholder="输入管理员密钥...">
                </div>
                <button id="adminLoginBtn" class="btn-admin">进入管理员控制台</button>
            </div>
            
            <div class="game-info">
                <h3>游戏规则：</h3>
                <ul>
                    <li>每天拥有 <strong>10点行动力</strong>。</li>
                    <li>在场景中探索，随机获取道具或线索。</li>
                    <li>管理你的生命值与理智值。</li>
                    <li>道具每两天刷新一次。</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ===== 游戏主界面 (默认隐藏) ===== -->
    <div id="gameScreen" class="screen" style="display: none;">
        <!-- 顶部状态栏 -->
        <div class="status-bar">
            <div class="player-info">
                <span id="playerDisplayName">客人</span>
                <span class="health">❤️ <span id="healthValue">100</span></span>
                <span class="sanity">🧠 <span id="sanityValue">100</span></span>
            </div>
            <div class="game-state">
                第 <span id="currentDay">1</span> 天 | 行动点: <span id="actionPointsDisplay">10</span>
            </div>
        </div>

        <!-- 主内容区 -->
        <div class="main-content">
            <!-- 左侧：2D地图区 -->
            <div class="map-container">
                <h3>🏔️ 玫瑰山庄地图</h3>
                <div class="map-grid">
                    <!-- 这里将用JavaScript动态生成地图地点按钮 -->
                    <button class="location-btn" data-location="room_101">101号房间</button>
                    <button class="location-btn" data-location="room_102">102号房间</button>
                    <button class="location-btn" data-location="garden">静谧花园</button>
                    <button class="location-btn" data-location="library">古老图书室</button>
                    <button class="location-btn" data-location="hotspring">山间温泉</button>
                    <!-- 你可以在这里添加更多地点的按钮 -->
                </div>
            </div>

            <!-- 中央：3D场景/信息显示区 -->
            <div class="scene-container">
                <h3>📍 <span id="currentLocationName">当前位置</span></h3>
                <div id="threejsContainer">
                    <!-- Three.js 3D场景将在这里渲染 -->
                    <p class="placeholder">选择地图上的地点进入3D场景...</p>
                </div>
                <div id="locationDescription">
                    <p>描述将在这里显示。点击场景中的物体进行交互。</p>
                </div>
                <div id="clueDisplay" class="clue-box"></div>
            </div>

            <!-- 右侧：玩家状态与背包 -->
            <div class="side-panel">
                <div class="inventory-panel">
                    <h3>🎒 背包</h3>
                    <div id="inventoryList">
                        <p class="empty">背包空空如也。</p>
                        <!-- 背包物品将通过JavaScript动态添加到这里 -->
                    </div>
                </div>
                
                <div class="attributes-panel">
                    <h3>📊 属性</h3>
                    <ul id="attributesList">
                        <li>力量: <span id="attrStrength">10</span></li>
                        <li>敏捷: <span id="attrAgility">10</span></li>
                        <li>治疗: <span id="attrHealing">5</span></li>
                        <li>幸运: <span id="attrLuck">5</span></li>
                    </ul>
                </div>

                <button id="adminToggleBtn" class="btn-admin">🔧 管理员入口</button>
            </div>
        </div>

        <!-- 简易管理员面板（默认隐藏） -->
        <div id="adminPanel" style="display: none; margin-top: 20px; padding: 15px; background: #222; border: 1px solid #f00;">
            <h3>🛠️ 管理员控制台</h3>
            <input type="password" id="adminPassword" placeholder="输入管理密码" style="margin-right: 10px;">
            <button id="adminLoginBtn">验证</button>
            <div id="adminControls" style="display: none; margin-top: 15px;">
                <p>已验证。高级功能（如重置游戏、修改玩家）将在后续开发中实现。</p>
                <button id="forceResetBtn">🔄 强制重置所有地点道具</button>
            </div>
        </div>
    </div>

    <!-- ===== 引入核心游戏逻辑 ===== -->
    <!-- 【重要】请确保 game.js 中的 Firebase 配置已替换为你自己的！ -->
    <script type="module" src="game.js"></script>
</body>
</html>